<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DK OS</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style id="modern">
    body {
      margin: 0;
      padding-top: 20px;
      font-family: Arial, sans-serif;
      height: 100vh;
      background-color: rgb(243, 243, 243);
    }

    h1,
    h2,
    p {
      margin: 0;
      padding: 0;
    }

    h1 {
      font-size: 2em;
      font-weight: bold;
      color: black;
      text-align: center;
    }

    h2 {
      font-size: 1.5em;
      color: black;
    }

    p {
      font-size: 1.2em;
      color: black;
    }

    #intro {
      padding: 10px;
      overflow: none;
      font-size: 1.2rem;
      height: 150vh;
    }



    .tab {
      display: none;
      font-family: Arial, sans-serif;
      height: 100vh;
      background-color: rgb(243, 243, 243);
    }

    #tab-container {
      display: flex;
      flex-direction: row;
      row-gap: 1px;
      justify-content: center;
      align-items: center;
      column-gap: 0px;
      row-gap: 0px;
    }
    @media (max-width: 400px) { /* Adjust the breakpoint value based on your design */
  #tab-container {
    flex-direction: column;
  }
}


    .active {
      display: block;
    }

    .tab-button {
      background-color: rgb(243, 243, 243);
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: bold;
      padding: 10px;
      margin: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);

    }

    .tab-button:hover {
      background-color: rgb(230, 230, 230);
    }

    .tab-button.active {
      border-top: 5px solid rgb(208, 242, 255);
    }

    #sys-about {
      font-size: 1.2rem;
      font-weight: bold;
      display: flex;
      flex-direction: column;
    }


    a:visited {

      color: rgb(69, 114, 129);
    }

    a {

      color: rgb(139, 198, 218);
    }

    a:hover {

      color: rgb(69, 114, 129);
    }



    #settings button {
      background-color: rgb(243, 243, 243);
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      padding: 10px;
      margin: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
      
    }

    #settings button:hover {
      background-color: rgb(230, 230, 230);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    input[type="text"],
    input[type="url"],
    input[type="submit"] {
      padding: 10px;
      border: 1px solid rgb(139, 198, 218);
      border-radius: 5px;
      font-size: 1.2rem;
    }
  </style>


  <style id="retro">
    body {
      margin: 0;
      padding-top: 20px;
      font-family: Arial, sans-serif;
      height: 100vh;
    }

    h1,
    h2,
    p {
      margin: 0;
      padding: 0;
    }

    h1 {
      font-size: 2em;
      font-weight: bold;
      color: #aaff00;
    }

    h2 {
      font-size: 1.5em;
      color: #aaff00;
    }

    p {
      font-size: 1.2em;
      color: #aaff00;
    }



    a:visited {

      color:  #84c208;
    }

    a {

      color: #aaff00;
    }

    a:hover {

      color:  #c7f866;
    }


    #intro {
      background-color: #000000;
      padding: 10px;
      overflow: none;
      font-size: 1.2rem;
      height: 150vh;
    }

    .tab {
      display: none ;
      font-family: Arial, sans-serif;
      height: 100vh;
    }

    #tab-container {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      column-gap: 0px;
      row-gap: 0px;
      width: 100dvw;
    }

    .active {
      display: block;
    }

    button {
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: bold;
      padding: 10px;
      margin: 10px;
      border-radius: 5px;

      background-color: grey;

    }

    button:hover {
      background-color: rgb(49, 47, 47);
    }

    button.active {
      border-top: 5px solid #aaff00;
    }

    #sys-about {
      font-size: 1.2rem;
      font-weight: bold;
      display: flex;
      flex-direction: column;
    }

  </style>
</head>

<body>
  <div id="intro">
    <div id="tab-container">

      <button class="tab-button active" onclick="openTab(event, 'welcome')">
        Welcome
      </button>

      <button class="tab-button" onclick="openTab(event, 'about')">
        About
      </button>
      <button class="tab-button" onclick="openTab(event, 'help')">
        Help
      </button>

      <button class="tab-button" onclick="openTab(event, 'settings')">
        Settings
      </button>

    </div>

    <div class="tab active" id="welcome">
      <h1>Welcome to DK OS üñ•Ô∏èüñ•Ô∏èüñ•Ô∏èüñ•Ô∏èüñ•Ô∏èüñ•Ô∏è</h1>
      <p>
        Thank you for checking out my portfolio website. It is in the style of a Desktop Environment. <br> <br>
        If you would like to see my take on a more traditional website :
        <a href="index copy.html" target="_blank"> My Old website </a>
      </p>
    </div>

    <div class="tab" id="about">
      <h1>DK OS</h1>
      <p id="sys-about">
      <p>
        version: 1.2.0
      </p>
      <p>
        Memory: 8GB
      </p>
      <p>
        Processor: Intel Core i5
      </p>
      <p> Graphics : Intel Iris Plus Graphics 640 1536 MB</p>
      </p>

      <br>
      <p> </br> This project is inspired by some similar websites I have seen, web core aesthetics, the game <a
          href="https://lmirman.itch.io/somnium" target="_blank"> Somnium </a>,and retro computers like the old macs.</p>
      <br>
    </div>

    <div class="tab" id="help">
      <h1>Help</h1>
      <p>
        This desktop is a portfolio website. It is not a real operating system. <br>
        However it acts a lot like your desktop. <br> <br>You can open and close windows, and move them around. <br><br>
        double click on the icons to open them.
        if you have any questions or comments, please email me at <a href="mailto:davidkozdra@gmail.com"
          target="_blank">davidkozdra@gmail.com <i class="fa-solid fa-envelope"></i><a>

      </p>
    </div>
    
    <div class="tab" id="settings" >
      <h1>Settings</h1>
      <button onclick="clearData()"> Clear Data</button>

      <h1 id="theme-display">Theme</h1>
      <label>
        <input type="radio" name="styleToggle" id="modern" onclick="sendMessage('modern')"> Modern
      </label>
      <label>
        <input type="radio" name="styleToggle" id="retro" onclick="sendMessage('retro')"> Retro
      </label>
    </div>

  </div>

  <script>
    init();

    function init() {
      let defaultStyleSheet = localStorage.getItem('defaultStyleSheet') || 'modern';
    // Check the radio button for the current stylesheet
    const radioButtons = document.querySelectorAll('input[type="radio"]');
    radioButtons.forEach(button => {
      button.checked = false;
      if (button.id === defaultStyleSheet) {
        button.checked = true;
      }
    });

    let localStyle = localStorage.getItem('stylesheet');
    if (localStyle) {
      let style = document.getElementById(localStyle);
      style.disabled = false;
    }

    sendMessage(defaultStyleSheet);

    
document.addEventListener('DOMContentLoaded', () => {

// make a component somewhere that adds a desktop icon to the desktop its a window
// it will be an iframe with a simple input form for all the items of a userCustums object
// !!!let container = document.createElement("div");
  let container = document.getElementById("settings");
  // Set container style

  let h1 = document.createElement("h1");
  h1.textContent = "Add a Custom Desktop Icon";
  container.appendChild(h1);

  // Create the form element
  let form = document.createElement("form");

  // Create the title input
  let input = document.createElement("input");
  input.type = "text";  // Correcting the input type
  input.name = "Title";
  input.placeholder = "Enter Title";

  // Create the URL input
  let url_input = document.createElement("input");
  url_input.type = "url";
  url_input.name = "url";
  url_input.placeholder = "Enter URL";

  // Create the submit button
  let submit = document.createElement("input");
  submit.type = "submit";
  submit.value = "Submit";

  // On submit, store the input data in local storage
  submit.onclick = (event) => {
    event.preventDefault(); // Prevent form submission
    let userCustoms = JSON.parse(localStorage.getItem("userCustoms"));
    if (!userCustoms) {
      userCustoms = [];
    }
    userCustoms.push({ name: input.value, data: url_input.value, icon: "./images/Settings.png" });
    localStorage.setItem("userCustoms", JSON.stringify(userCustoms));
    alert("Settings saved!");

    window.parent.postMessage( "change_desktop_icons_custom" , '*');
  };

  // Append the inputs and submit button to the form
  form.appendChild(input);
  form.appendChild(url_input);
  form.appendChild(submit);

  // Append the form to the container
  container.appendChild(form);

 

    // add a function to list in settings as components all the userCustoms and add remove and edit functionallity that is toggled by a button
    let userCustomsItem = document.createElement("div");

let userCustoms = JSON.parse(localStorage.getItem("userCustoms"));
if (userCustoms) {
  let itemsScrollViewer = document.createElement("div");
  itemsScrollViewer.style.overflow = "scroll";
  
  userCustoms.forEach((item, index) => {
    let userCustomsItem = document.createElement("div");

    
    userCustomsItem.innerHTML = `
      <img src="${item.icon}" alt="${item.name}" />
      <h3>${item.name}</h3>
      <a href=${item.data}>${item.data}</a>
      <button onclick="removeItem(${index})">Remove</button>
      <button onclick="editItem(${index})">Edit</button>
    `;
    itemsScrollViewer.appendChild(userCustomsItem);
  });
  container.appendChild(itemsScrollViewer);
}
  });
    }

    function removeItem(index) {
      let userCustoms = JSON.parse(localStorage.getItem("userCustoms"));
      userCustoms.splice(index, 1);
      localStorage.setItem("userCustoms", JSON.stringify(userCustoms));
      
      window.parent.postMessage( "change_desktop_icons_custom" , '*');
    }

    function editItem(index) {
      let userCustoms = JSON.parse(localStorage.getItem("userCustoms"));
      let item = userCustoms[index];
      let form = document.querySelector("form");
      form.querySelector("input[name='Title']").value = item.name;
      form.querySelector("input[name='url']").value = item.data;
      userCustoms.splice(index, 1);
      localStorage.setItem("userCustoms", JSON.stringify(userCustoms));

      window.parent.postMessage( "change_desktop_icons_custom" , '*');
    }

  


    function openTab(evt, tabName) {
      evt.preventDefault();
      let buttons = document.getElementsByClassName("tab-button");
      for (let i = 0; i < buttons.length; i++) {
        buttons[i].classList.remove("active");
      }

      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tab");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove("active");
      }
      let currentTab = document.getElementById(tabName);
      currentTab.classList.add("active");

      evt.currentTarget.classList.add("active");

      evt.currentTarget.classList.add("active");
    }

    function clearData() {
      localStorage.clear();
      sessionStorage.clear();

      // this is wrong we want to set our defults back to the default local store values/ or on first read set them 
      //location.reload();

    }



    function sendMessage(stylesheetId) {
      //set local stylesheet to disabled
      let styles = document.querySelectorAll('style');
      styles.forEach(style => {
        if (style.id !== stylesheetId ) {
          style.disabled = true;
        }else {
          style.disabled = false;
        }
      });
      window.parent.postMessage({ stylesheetId }, '*');
    }


  </script>
</body>
